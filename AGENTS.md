# AI Agent Operational Guide (AGENTS.md)

This document provides context, commands, and conventions for AI agents (and human developers) working on the `personal-task-manager-api` repository.

## 1. Project Overview
- **Type:** Spring Boot REST API
- **Language:** Java 25
- **Framework:** Spring Boot 4.0.1
- **Build System:** Maven
- **Database:** H2 (Runtime/Test)

## 2. Operational Commands

### Build & Run
- **Build (Clean & Install):**
  ```bash
  ./mvnw clean install
  ```
- **Run Application:**
  ```bash
  ./mvnw spring-boot:run
  ```

### Testing
- **Run All Tests:**
  ```bash
  ./mvnw test
  ```
- **Run Single Test Class:**
  ```bash
  ./mvnw -Dtest=TaskDtoJsonTests test
  ```
- **Run Single Test Method:**
  ```bash
  ./mvnw -Dtest=TaskDtoJsonTests#taskDtoSerializationTest test
  ```

## 3. Code Style & Conventions

### Formatting
- **Indentation:** 4 spaces.
- **Line Length:** ~120 characters preferred.
- **Braces:** K&R style (on the same line).

### Naming Conventions
- **Classes/Interfaces:** `PascalCase` (e.g., `TaskDto`, `TaskController`).
- **Methods:** `camelCase` (e.g., `taskDtoSerializationTest`).
- **Variables/Fields:** Generally `camelCase`.
  - **Exception:** Foreign keys or ID references may use `snake_case` (e.g., `user_id` in `Task` entity and `TaskDto`).
- **Constants:** `UPPER_SNAKE_CASE`.

### Java & Spring Patterns
- **Lombok:** Heavily used to reduce boilerplate.
  - Entities: `@Entity`, `@Getter`, `@Setter`, `@NoArgsConstructor(access = AccessLevel.PROTECTED)`.
  - DTOs: Use Java `record` with `@Builder`.
- **DTOs:** Prefer Java `record` over classes for data transfer objects.
- **Dependency Injection:** Prefer constructor injection (standard Spring practice), though field injection (`@Autowired`) is acceptable in tests.
- **Date/Time:** Use `OffsetDateTime` for timestamps.

### Imports
- Avoid wildcard imports (e.g., `import java.util.*;`).
- Order:
  1. Static imports
  2. Java standard libraries (`java.*`, `javax.*`)
  3. Third-party libraries (`org.springframework.*`, `lombok.*`)
  4. Project internal classes (`io.github.kubaj12.*`)

## 4. Testing Guidelines
- **Frameworks:** JUnit 5, AssertJ, Spring Boot Test.
- **JSON Testing:** Use `@JsonTest` and `JacksonTester` for DTO serialization tests.
- **Assertions:** Use AssertJ's fluent API (e.g., `assertThat(actual).isEqualTo(expected)`).
- **Mocking:** Use `@MockBean` for dependencies in slice tests (WebMvcTest) and `@Mock` in unit tests.

## 5. Error Handling
- Use global exception handling via `@ControllerAdvice` / `@RestControllerAdvice` (if implemented).
- Return standard HTTP status codes (200, 201, 400, 404, 500).

## 6. Architecture
- **Entities:** Located in `*.entity`. Maps directly to DB tables.
- **DTOs:** Located in `*.dto`. Decoupled from entities.
- **Repository:** Spring Data JPA / REST interfaces.

---
*Generated by AI for AI. Adhere strictly to these patterns to maintain code consistency.*